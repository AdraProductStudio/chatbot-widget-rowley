!function(n,e){e.addEventListener("DOMContentLoaded",(()=>{t.init({apiKey:"MR_Widget"})}));const t={init:function(n){const{apiKey:e,containerId:t="MR-chatbot-section"}=n;"MR_Widget"===n.apiKey?(this.injectStyles(e),this.injectGoogleFonts(),this.renderChatWidget(n,t)):alert("Invalid API key")},injectGoogleFonts:function(){const n=e.createElement("link");n.rel="stylesheet",n.href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined&display=swap",e.head.appendChild(n)},injectStyles:function(n){const t=e.createElement("style");t.innerHTML="\n\n            @import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Manrope:wght@200..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');\n\n                :root {\n                    --overall-theme : #353f3e;\n                    --incoming-msg-bg : #5e6e66;\n                    --incoming-msg-text : #fff;\n                    --outgoing-msg-bg : #f7971d;\n                    --outgoing-msg-text : #000;\n                }\n\n                * {\n                    margin: 0;\n                    padding: 0;\n                    box-sizing: border-box;\n                    \n                }\n                .MR-chatbot {\n                    position: fixed;\n                    bottom: 100px;\n                    right: 40px;\n                    background-color: #fff;\n                    width: 420px;\n                    border-radius: 15px;\n                    overflow: hidden;\n                    transform: scale(0.5);\n                    opacity: 0;\n                    transition: all 0.2s linear;\n                    border: 1px solid rgb(228, 228, 228);\n                    z-index: 1000\n                }\n                .MR-show-chatbot .MR-chatbot {\n                    transform: scale(1);\n                    opacity: 1;\n                    transition: all 0.2s linear;\n                }\n                .MR-chatbot header {\n                    background-color: var(--overall-theme);\n                    text-align: center;\n                    padding: 30px 0;\n                    position: relative;\n                }\n                .MR-chatbot header .close-icon {\n                    position: absolute;\n                    top: 50%;\n                    right: 20px;\n                    transform: translateY(-50%);\n                    color: #fff;\n                    display: none;\n                }\n                .MR-chatbot header .MR-h2 {\n                    color: #fff;\n                     font-weight: 600;\n                    font-size: 22.4px;\n                    margin-top: 0;\n                    margin-bottom: 0;\n                    font-family: 'Poppins', sans-serif;\n                }\n                .MR-chatbot .MR-chatbox {\n                    height: 510px;\n                    overflow-y: scroll;\n                    padding: 15px 20px 70px;\n                }\n                .MR-chatbot .chat {\n                    display: flex;\n                }\n                .MR-chatbox .incoming {\n                    margin-top: 7px;\n                }\n                .MR-chatbox .smart-toy {\n                    height: 32px;\n                    width: 32px;\n                    align-self: flex-end;\n                    background-color: var(--overall-theme);\n                    color: #fff;\n                    text-align: center;\n                    margin: 0 10px 7px 0;\n                    line-height: 32px;\n                    border-radius: 4px;\n                }\n                .MR-chatbox .outgoing {\n                    margin: 20px 0;\n                    justify-content: flex-end;\n                }\n                .MR-chatbot .MR-chat-input {\n                    position: absolute;\n                    bottom: 0;\n                    width: 100%;\n                    border-top: 1px solid #ccc;\n                    padding: 0px 20px;\n                    display: flex;\n                    gap: 5px;\n                    background: #fff;\n                }\n                .MR-chat-input textarea {\n                    border: none;\n                    outline: none;\n                    font-size: 0.95rem;\n                    resize: none;\n                    padding: 16px 15px 16px 0;\n                    width: 100%;\n                    font-size: 14px;\n                    font-family: 'Poppins', sans-serif;\n                }\n                .MR-chat-input textarea{\n                    box-shadow: none !important;\n                }\n                .MR-chatbot #MR-send-btn {\n                    color: var(--overall-theme);\n                    font-size: 24px;\n                    cursor: pointer;\n                    align-self: center;\n                    pointer-events: none;\n                    opacity: 25%;\n                }\n                .MR-chat-input textarea:valid~#MR-send-btn {\n                    visibility: visible;\n                    pointer-events: all;\n                    opacity: 100%;\n                }\n                .MR-chatbot-toggler {\n                    position: fixed;\n                    bottom: 40px;\n                    right: 35px;\n                    background-color: var(--overall-theme);\n                    color: #fff;\n                    border-radius: 50%;\n                    width: 50px;\n                    height: 50px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    cursor: pointer;\n                    z-index :999;\n                }\n                .MR-chatbot-toggler p {\n                    position: absolute;\n                }\n                .MR-chatbot-toggler .message-icon {\n                    opacity: 1;\n                    margin-bottom: 0;\n                }\n                .MR-chatbot-toggler .close-icon {\n                    opacity: 0;\n                    margin-bottom: 0;\n                }\n                .MR-show-chatbot .MR-chatbot-toggler .message-icon {\n                    opacity: 0\n                }\n                .MR-show-chatbot .MR-chatbot-toggler .close-icon {\n                    opacity: 1;\n                }\n                .user-icon,\n                .bot-icon {\n                    width: 30px;\n                    height: 30px;\n                    flex-shrink: 0;\n                }\n                .MR-chatbot .placeholder-msg {\n                    display: flex;\n                    width: 85%;\n                    margin-bottom: 1rem;\n                }\n                .MR-chatbot .incoming-msg {\n                    display: flex;\n                    width: 85%;\n                    margin-bottom: 1rem;\n                }\n                .MR-chatbot .botText {\n                    color: #000;\n                    font-weight: normal;\n                    font-size: 14px;\n                    text-align: left;\n                    margin-bottom: 1rem;\n                    font-family: 'Poppins', sans-serif;\n                }\n                .MR-chatbot .botText span {\n                    line-height: 1.5em;\n                    display: inline-block;\n                    background-color: var(--overall-theme);\n                    color: #fff;\n                    padding: 10px;\n                    border-radius: 8px;\n                    border-bottom-left-radius: 2px;\n                    max-width: 100%;\n                    margin-left: 10px;\n                    animation: floatup .5s forwards;\n                    overflow-wrap: break-word;\n                    word-wrap: break-word;\n                    word-break: break-word;\n                    hyphens: auto;\n                }\n                .MR-chatbot .placeholder-msg-text {\n                    line-height: 1.5em;\n                    display: inline-block;\n                    background-color: var(--incoming-msg-bg);\n                    color: var(--incoming-msg-text);\n                    font-size: 14px;\n                    padding: 10px;\n                    border-radius: 8px;\n                    border-top-left-radius: 2px;\n                    max-width: 100%;\n                    margin-left: 10px;\n                    animation: floatup .5s forwards;\n                    overflow-wrap: break-word;\n                    word-wrap: break-word;\n                    word-break: break-word;\n                    hyphens: auto;\n                    font-family: 'Poppins', sans-serif;\n                }\n                .MR-chatbot .incoming-msg-text {\n                    line-height: 1.5em;\n                    display: inline-block;\n                    background-color: var(--incoming-msg-bg);\n                    color: var(--incoming-msg-text);\n                    font-size: 14px;\n                    padding: 10px;\n                    border-radius: 8px;\n                    border-top-left-radius: 2px;\n                    max-width: 100%;\n                    margin-left: 10px;\n                    animation: floatup .5s forwards;\n                    overflow-wrap: break-word;\n                    word-wrap: break-word;\n                    word-break: break-word;\n                    hyphens: auto;\n                    font-family: 'Poppins', sans-serif;\n                }\n                .MR-chatbot .outgoing-msg {\n                    display: flex;\n                    float: right;\n                    width: 75%;\n                    justify-content: end;\n                }\n                .MR-chatbot .incoming-timeFontSize {\n                    float: right;\n                    margin-top: 30px;\n                }\n                .MR-chatbot .placeholder-msg-time {\n                    float: right;\n                    margin-top: 30px;\n                    font-size: 12px;\n                    font-family: 'Poppins', sans-serif;\n                }\n                .MR-chatbot .incoming-msg-time {\n                    float: right;\n                    margin-top: 30px;\n                    font-size: 12px;\n                    font-family: 'Poppins', sans-serif;\n                }\n                .MR-chatbot .outgoing-msg-time {\n                    float: right;\n                    margin-top: 30px;\n                    font-size: 12px;\n                    font-family: 'Poppins', sans-serif;\n                }\n                .MR-chatbot .outgoing-msg-text {\n                    margin-right: 10px;\n                    background: var(--outgoing-msg-bg) !important;\n                    color: #fff;\n                    padding: 10px;\n                    border-radius: 8px;\n                    border-top-right-radius: 2px;\n                    font-size: 14px;\n                    margin-bottom: 1rem;\n                    word-wrap: break-word;\n                    word-break: break-word;\n                    max-width: 100%;\n                    font-family: 'Poppins', sans-serif;\n                }\n                .d-none {\n                    display: none;\n                }\n\n\n                /* media-queries */\n                @media (max-width:490px) {\n                    .MR-chatbot {\n                        width: 100%;\n                        height: 100%;\n                        bottom: 0;\n                        right: 0;\n                        z-index: 1;\n                    }\n                    .MR-chatbot header {\n                        background-color: var(--overall-theme);\n                        text-align: center;\n                        padding: 30px 0;\n                        position: relative;\n                    }\n                    .MR-chatbot header .close-icon {\n                        display: block;\n                    }\n                    .MR-chatbot {\n                        opacity: 0 !important;\n                    }\n                    .MR-show-chatbot .MR-chatbot {\n                        opacity: 1 !important;\n                    }\n                } ",e.head.appendChild(t)},renderChatWidget:function(n,t){let o=e.getElementById(t);o||(o=e.createElement("div"),o.id=t,e.body.appendChild(o)),o.innerHTML='\n                        <div id="MR-chatbot-section" class="MR-chatbot-section">\n                            <div class="MR-chatbot">\n                                <header class="MR-header">\n                                <h2 class="MR-h2">MR Agent</h2>\n                                <p class="MR material-symbols-outlined close-icon MR-chatbot-close-icon">close</p>\n                                </header>\n                                <div class="MR-chat-container" id="MR-chat-container">\n                                <ul class="MR-chatbox" id="MR-chatbox">\n                                    <div class="d-flex incoming-msg" id="incoming-msg-box">\n                        \n                                    </div>\n                                </ul>\n                                </div>\n                                <div class="MR-chat-input">\n                                <textarea autofocus="" class="MR-userInputText" id="MR-userInputText" placeholder="Enter a message..."\n                                    required=""></textarea>\n                                <span class="material-symbols-outlined" id="MR-send-btn">send</span>\n                                </div>\n                            </div>\n                            <div class="MR-chatbot-toggler">\n                                <p class="material-symbols-outlined message-icon">mode_comment</p>\n                                <p class="material-symbols-outlined close-icon">close</p>\n                            </div>\n                        </div>',this.initializeChatLogic(o)},initializeChatLogic:function(n){let t,o,a=null,i=null;const s=e.getElementById("MR-chatbot-section");s.className="MR-chatbot-section";const r=e.getElementById("MR-chatbox"),c=e.getElementById("MR-userInputText"),l=e.getElementById("MR-send-btn"),d=e.querySelector(".MR-chatbot-toggler"),m=e.querySelector(".MR-chatbot-close-icon"),p=e.getElementById("incoming-msg-box");p.className="d-flex placeholder-msg";const g=e.createElement("img");g.className="bot-icon",g.setAttribute("src","https://modelrocket.matsuritech.com/static/media/model-rocket-bot.4126f760133924edc8a02fd208464bdf.svg");const h=e.createElement("p");h.className="placeholder-msg-text",h.innerHTML="...";const b=e.createElement("i");b.className="placeholder-msg-time",b.innerText=u(new Date),h.append(b);const f=e.createElement("div");p.append(g,h,f),r.append(p);const x=()=>Math.floor(9e9*Math.random())+1e9;function u(n){var e=n.getHours(),t=n.getMinutes(),o=e>=12?"pm":"am";return(e=(e%=12)||12)+":"+(t=t<10?"0"+t:t)+" "+o}const y=async(n,s)=>{var c,l;if(console.log(n),c={client_name:"Unger - UK",service_name:"Unger - UK",language:"english",msg:s,flag:n,session_id:i},await fetch("https://consumertestapi.matsuritech.com/chatbot_widget",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(c)}).then((n=>{if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return n.json()})).then((n=>{d.style.pointerEvents="all",d.style.opacity="1",l=n.data,p.className="d-none",201===n.error_code?(o=n.data.message,clearTimeout(a),i=x(),setTimeout((()=>{w()}),1500)):(o=n.data.message,v("continous"))})).catch((n=>{console.error("Error:",n)})),0===Object.keys(l).length)console.log(l);else if(Object.keys(l).length){const n=e.createElement("div");n.className="d-flex incoming-msg";const t=e.createElement("img");t.className="bot-icon",t.setAttribute("src","https://modelrocket.matsuritech.com/static/media/model-rocket-bot.4126f760133924edc8a02fd208464bdf.svg");const a=e.createElement("div");a.className="incoming-msg-text",a.innerHTML=`${o}`;let i=a.querySelector("a");i&&(i.style.color="#fff",i.style.textDecoration="underline");const s=e.createElement("i");s.className="incoming-msg-time",s.innerText=u(new Date),a.append(s);const c=e.createElement("div");n.append(t,a,c),r.append(n),c.scrollIntoView({behavior:"smooth"})}else{const n=e.createElement("div");n.className="d-flex incoming-msg";const t=e.createElement("img");t.className="bot-icon",t.setAttribute("src","https://modelrocket.matsuritech.com/static/media/model-rocket-bot.4126f760133924edc8a02fd208464bdf.svg");const o=e.createElement("p");o.className="incoming-msg-text",o.innerHTML="Something went wrong.Please try again later!";const a=e.createElement("i");a.className="incoming-msg-time",a.innerText=u(new Date),o.append(a);const i=e.createElement("div");n.append(t,o,i),r.append(n),i.scrollIntoView({behavior:"smooth"})}},M=()=>{const n=e.createElement("div");n.className="d-flex outgoing-msg";const t=e.createElement("p"),o=e.createElement("img");t.className="outgoing-msg-text",t.innerText=c.value;const a=e.createElement("i");a.className="outgoing-msg-time",a.innerText=u(new Date),t.append(a),o.id="user-icon",o.className="user-icon",o.setAttribute("src","https://static.vecteezy.com/system/resources/previews/016/079/150/non_2x/user-profile-account-or-contacts-silhouette-icon-isolated-on-white-background-free-vector.jpg"),n.append(t,o);const i=e.createElement("div");r.append(n,i),i.scrollIntoView({behavior:"smooth"}),setTimeout((()=>{y("step",c.value),c.value="",i.scrollIntoView({behavior:"smooth"})}),0)};l.addEventListener("click",M),c.addEventListener("keypress",(n=>{if("Enter"===n.key){if(""===c.value.trim())return void n.preventDefault();n.preventDefault(),M()}}));const w=async()=>{s.classList.toggle("MR-show-chatbot"),p.className="d-flex placeholder-msg",r.append(p),s.className.includes("MR-show-chatbot")?((async()=>{await(async()=>{d.style.pointerEvents="none",d.style.opacity="0.5",await(async()=>{const n=btoa("matsuri:fc153ac36455604c6a6bcb3e22c0a4debfb746d59ad4a33a4b0d50f315206958d78da64e88957993e537e5ef235537a65ac0bc8fbaa725ae3e8e151617e82b81");fetch("https://consumertestapi.matsuritech.com/gettoken",{method:"GET",headers:{Authorization:`Basic ${n}`}}).then((n=>{if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return n.json()})).then((n=>{200===n.error_code&&(t=n.data.token,(async()=>{await y("init","")})())})).catch((n=>{console.error("Error:",n)}))})()})()})(),i=x(),console.log(i)):(r.innerHTML="",c.value="",v("close"))},v=n=>{a&&clearTimeout(a),"close"===n?(console.log("closed"),R("close")):R("continous")},R=n=>{"close"!==n?a=setTimeout((async()=>{await y("step","")&&v("continous")}),5e3):r.innerHTML=""};d.addEventListener("click",w),m.addEventListener("click",(()=>{s.classList.toggle("MR-show-chatbot")}))}};n.ChatWidget=t}(window,document);